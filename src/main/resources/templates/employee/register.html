<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

    <th:block th:replace="~{/fragments/head :: head}"></th:block>

    <title>Main</title>

</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        <div id="sidebar" th:replace="~{/fragments/sidebar :: sidebar}"></div>

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <div id="topbar" th:replace="~{/fragments/topbar :: topbar}"></div>

                <div class="container-fluid">

                    <!-- Page Heading -->
                    <h1 class="h3 mb-2 text-gray-800">사원 등록</h1>
                    <p class="mb-4">건강검진, 등본, 통장 사본 등 각종 문서 등록은 사원 등록 이후 가능합니다.</p>
                    <!-- Project Card Example -->
                    <div class="card shadow mb-4">
                        <form th:action="@{/employee/register}" method="post">
                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">사원 정보</h6>
                            </div>
                            <!-- 사원 정보 입력 Form -->
                            <div class="card-body">
                                <div class="form-group">
                                    <label for="affiliation">소속</label>
                                    <input type="text" class="form-control" id="affiliation" name="affiliation" required>
                                </div>
                                <div class="form-group">
                                    <label for="name">이름</label>
                                    <input type="text" class="form-control" id="name" name="name" required>
                                </div>
                                <div class="form-group">
                                    <label for="residentNo">주민번호</label>
                                    <input type="text" class="form-control" id="residentNo" name="residentNo" required>
                                </div>
                            </div>

                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">근무 정보</h6>
                            </div>
                            <!-- 근무 정보 입력 Form -->
                            <div class="card-body">
                                <div class="form-group">
                                    <label for="position">직급</label>
                                    <input type="text" class="form-control" id="position" name="position" required>
                                </div>
                                <div class="form-group">
                                    <label for="rate">급수</label>
                                    <input type="text" class="form-control" id="rate" name="rate" required>
                                </div>
                                <div class="form-group">
                                    <label for="workLocation">근무지</label>
                                    <input type="text" class="form-control" id="workLocation" name="workLocation" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone">전화번호</label>
                                    <input type="text" class="form-control" id="phone" name="phone" required>
                                </div>
                                <div class="form-group">
                                    <label for="emergencyContact">비상연락망</label>
                                    <input type="text" class="form-control" id="emergencyContact" name="emergencyContact" required>
                                </div>
                            </div>
                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">금융 정보</h6>
                            </div>
                            <!-- 금융 정보 입력 Form -->
                            <div class="card-body">
                                <div class="form-group">
                                    <label for="bank">은행명</label>
                                    <input type="text" class="form-control" id="bank" name="bank" required>
                                </div>
                                <div class="form-group">
                                    <label for="accountNumber">계좌번호</label>
                                    <input type="text" class="form-control" id="accountNumber" name="accountNumber" required>
                                </div>
                                <div class="form-group">
                                    <label for="hourlyWage">시급</label>
                                    <input type="text" class="form-control" id="hourlyWage" name="hourlyWage" required>
                                </div>
                                <div class="form-group">
                                    <label for="salary">급여(월급)</label>
                                    <input type="text" class="form-control" id="salary" name="salary" required>
                                </div>
                                <div class="form-group">
                                    <label for="otHourlyWage">OT시급</label>
                                    <input type="text" class="form-control" id="otHourlyWage" name="otHourlyWage" required>
                                </div>
                            </div>
                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">학력 및 경력</h6>
                            </div>
                            <!-- 학력 및 경력 입력 Form -->
                            <div class="card-body">
                                <div class="form-group">
                                    <label for="education">학력</label>
                                    <input type="text" class="form-control" id="education" name="education" required>
                                </div>
                                <div class="form-group">
                                    <label for="careerMonths">경력(개월)</label>
                                    <input type="text" class="form-control" id="careerMonths" name="careerMonths" required>
                                </div>
                                <button type="button" class="btn btn-primary" onclick="employeeRegister()">등록</button>
                            </div>
                            <span></span>
                        </form>
                    </div>
                </div>
            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <footer th:replace="~{/fragments/footer :: footer}">
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

</body>
<!-- Script Fragments -->
<th:block th:replace="fragments/config :: config" ></th:block>
<script>
    async function employeeRegister() {
        const form = document.querySelector('form');
        const formData = new FormData(form);

        ComUtils.callFetch('/employee/employeeRegister.do', formData)
            .then(result => {
                if (typeof result === 'number') {
                    // HTTP 상태 코드를 받은 경우 (실패)
                } else {
                    // JSON 결과를 받은 경우 (성공)
                }
            })
            .catch(error => {
                // 에러 처리
            });
    }
</script>
</html>